name: Build LaTeX

on: [push]

jobs:
  build_latex:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: List files (Debug)
        run: ls -R

      # Use the pre-existing logic but simplified
      - name: Setup Docker Buildx
        uses: docker/setup-buildx-action@v2

      - name: Build Container
        run: docker build -t research/tex-builder:latest -f latex-common/Dockerfile latex-common

      - name: Build Seminar 1
        run: |
          chmod +x moma_seminar_1/compile.sh
          cd moma_seminar_1
          ./compile.sh

      - name: Build LLM Project
        run: |
          chmod +x momaLLM_minorchars_fixed_project/compile.sh
          cd momaLLM_minorchars_fixed_project
          ./compile.sh

      - name: Upload PDFs
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: research-pdfs
          path: |
            moma_seminar_1/dist/main.pdf
            momaLLM_minorchars_fixed_project/dist/main.pdf
